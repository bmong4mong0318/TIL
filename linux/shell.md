# What is Shells?

 Shell은 단순하게 명령어를 실행시키는 macro processor이다. Macro processor란, 단순한 텍스트나 기호들이 확장된 의미를 갖게 하는 환경에서 기능성을 부여하는 것을 의미한다. 

 Unix shell은 명령어를 해석할 뿐만 아니라 프로그래밍 언어의 역할도 한다. 명령어를 해석하는데 있어  Unix shell은 많은 유용한 기능을 지닌 GNU 환경에서 사용자 인터페이스를 제공한다. GNU 환경의 유용한 기능들을 잘 조합하여  사용할 수 있게 만드는 것은 shell의 프로그래밍적 특성이다.

 명령어를 포함하고 있는 파일들은 실행될 수 있으며, 파일 자체가 명령어인 파일도 존재할 수 있다. 이러한 파일들은 /bin에 있는 많은 명령어와 같은 속성을 갖고 있으며, 사용자나 그룹에게 업무를 자동화할 수 있게 사용자 정의 환경을 만들 수 있도록 한다.

 Shell은 사용자와 상호작용할 때는, 키보드에 입력된 입력을 받아들이고, 상호작용 하지 않을 때는 파일에서 읽어들인 명령어를 실행한다.

 Shell은 GNU 명령어를 동기적으로 실행하기도 하고, 비동기적으로 실행하기도 한다. Shell은 더 많은 입력을 받기 전에 동기 명령이 완료될 때까지 기다린다. 비동기 명령은 shell이 추가 명령을 읽고 실행하는 동안 shelll과 병렬로 계속 실행된다. Redirection은 명령어의 입력과 출력에 섬세한 조작 기능을 부여한다. 더 나아가, 쉘을 사용하면 명령어를 실행시키는 환경의 많은 내용물을 제어할 수 있게 된다.

 쉘은 또한 별도의 유틸리티를 통해 얻을 수 없거나 불편한 기능을 구현하는 작은 내장 명령 집합(내장)을 제공한다. 예를 들어, cd, break, continue, exec과 같은 명령어는 쉘을 직접 조작하기 때문에 쉘 외부에서 구현하지 못한다. history, getopts, kill, pwd와 같은 내장 명령어들은 구현될 수 있지만, 굳이 그럴 필요없이 내장 명령어를 사용하는 것이 훨씬 편할 것이다.

 쉘에서 명령어를 실행시키는 것은 중요하지만, 쉘의 진정한 힘은 내장된 프로그래밍 언어들에 있다. 여타 고급 언어들처럼, 쉘도 변수, 흐름 제어 구조, 인용 및 함수를 제공한다.

 쉘은 프로그래밍 언어를 확장하기보다는 대화형 사용을 위해 특별한 기능을 제공한다. 이러한 특별한 기능에는 작업 제어, command line 편집, command history, alias가 있다.

# Shell의 구성 요소

- 목차
  - [Command-Line Interface](#command-line-interface)
  - [Lexer](#lexer)
  - [Parser](#parser)
  - [Executor](#executor)
  - [Environment](#environment)
  - [Built-in Commands](#built-in-commands)
  - [Shell subsystems](#shell-subsystems)


### Command-Line Interface

- 사용자가 명령을 입력하고 출력을 수신하여 운영 체제와 상호 작용할 수 있도록 하는 텍스트 기반의 인터페이스입니다. Shell은 대부분의 유닉스 기반 시스템에서 CLI를 제공하는 프로그램입니다.
- CLI 특성
    - Prompt
        - Shell에 입력할 준비가 되었음을 나타내는 프롬프트(`$`)가 표시됩니다. 프롬프트에는 일반적으로 현재 작업 디렉토리, 호스트 이름 및 사용자 이름이 포함됩니다.
    - Command Syntax
        - 프롬프트에서 명령을 입력합니다. 명령은 일반적으로 명령 이름 다음에 인수, 옵션 또는 둘 다로 구성됩니다. 명령은 Enter 키를 눌러 실행됩니다.
    - Command History
        - Shell은 사용자가 입력한 이전 명령의 기록을 유지합니다. 이를 통해 사용자는 화살표 키 또는 다른 명령을 사용해 기록을 탐색하여 이전 명령을 다시 사용할 수 있습니다.
    - Tab Completion
        - Shell은 명령 및 인수를 더 쉽게 입력할 수 있도록 탭 완성을 제공합니다. 탭 완료를 통해 사용자는 부분 명령이나 파일 이름을 입력한 다음 Tab 키를 눌러 명령이나 파일 이름을 완료할 수 있습니다.
    - Redirection
        - Shell은 리디렉션 연산자를 제공하여 입력 및 출력을 리디렉션합니다. 예를 들어, 사용자는  “>” 연산자를 사용하여 명령 출력을 파일로 리디렉션 하거나 “<” 연산자를 사용하여 파일에서 입력을 리디렉션할 수 있습니다.
    - Pipes
        - Shell은 사용자가 명령을 결합할 수 있도록 파이프를 제공합니다. 파이프를 사용하면 한 명령의 출력을 다른 명령의 입력으로 사용할 수 있게 됩니다. 예를 들어, 사용자는 “|” 연산자를 사용하여 “ls” 명령의 출력을 “grep” 명령으로 파이프할 수 있습니다.
    - Wildcards
        - Shell은 사용자가 단일 명령을 사용해 여러 파일 이름을 지정할 수 있는 와일드카드(`*`)를 제공합니다. 와일드카드를 사용하여 여러 파일 이름과 일치하는 패턴을 지정할 수 있습니다. 예를 들어, 사용자는 “`*`” 와일드카드를 사용하여 디렉토리의 모든 파일을 선택할 수 있습니다.
    

### Lexer

- Shell 프로그래밍 관점에서 lexer(어휘 분석기)는 일련의 문자를 token 스트림으로 분해하는 프로그램 또는 구성 요소이며, 이는 parser에 의해 처리되어 다양한 작업을 수행할 수 있습니다. Shell lexer는 사용자가 cmd shell에서 입력한 입력을 분석하고 해당 입력을 shell이 이해하고 처리할 수 있는 token sequnce로 변환하는 역할을 담당합니다.

- Lexing process
    - 문자별로 입력 문자를 스캔하고 입력된 문자열을 구성하는 개별 구성 요소를 식별하는 작업이 포함됩니다. 예를 들어, `ls -l /usr/bin` 명령을 입력하면 lexer는 다음과 같이 token을 식별합니다.
        
        ```shell
        ls: 파일을 나열하는 명령
        -l: 출력을 긴형식으로 표시하는 옵션
        /usr/bin: 파일을 나열할 디렉터리 경로 
        ```
        
    - 이렇게 lexer에 의해 식별된 token은 shell parser로 전달되며, shell parser는 사용자의 입력을 실행하는 방법을 결정하는 데 이 token들을 사용합니다.

### Parser

- lexer에 의해 생성된 token sequence를 받아서 다양한 작업을 수행하기 위해 토큰의 구조와 의미를 결정하는 프로그램 또는 구성 요소입니다. Parser는 lexer가 생성한 token을 가져와 사용자의 명령을 해석하고 실행하는 데 사용될 수 있는 구문 트리 또는 기타 데이터 구조를 구성하는 데 사용합니다.
- Parsing process
    - lexer에 의해 생성된 token 간의 구조와 관계를 조사하고, 이 정보를 토대로 사용자 입력의 계층적 표현을 만듭니다. 예를 들어, `ls -l /usr/bin` 명령에서 parser는 `ls` 명령이 `-l` 옵션과 `/usr/bin` 디렉토리 경로를 통과하고 있음을 식별하고 이 관계를 나타내는 구문 트리 또는 기타 데이터 구조를 구성합니다.
- parser가 사용자의 입력을 의미하는 데이터 구조를 구성한 후에는 해당 정보를 사용하여 명령을 실행하거나 요청된 작업을 수행할 수 있습니다. 이 과정에서는 외부 프로그램이나 스크립트 호출, 파일이나 디렉터리와 같은 시스템 자원을 조작하거나, 특정 명령과 context에 따라 작업을 수행할 수도 있습니다.

### Executor

- 일련의 명령이나 작업을 수행하고 새로운 프로세스를 생성하여 관리하는 프로그램 또는 구성 요소입니다. Shell executor는 특히 실행 가능한 상태의 명령 sequence인 shell parser의 출력을 가져와 해당 정보를 토대로 명령을 실행할 책임을 갖고 있습니다.
- Executing process
    - 일반적으로 각 명령을 수행하기 위해 하나 이상의 새로운 프로세스들을 생성하고 필요에 따라 이 프로세스들 간의 통신 및 관계를 조정합니다. 여기에는 입출력 스트림 관리, 오류 처리, 파일 또는 디렉터리와 같은 다른 시스템 리소스와의 조정이 포함될 수 있습니다. 예를 들어 `ls -l /usr/bin` 명령에서 ls 명령어를 실행하기 위한 새로운 프로세스를 만들고 `-land /usr/bin` 인수를 전달하여 해당 명령의 출력을 적절한 출력 스트림이나 파일로 만들어 관리합니다.

### Environment

- 유닉스 계열 운영 체제에서 shell environment는 shell의 동작과 실행 프로그램에 영향을 미치는 변수들의 집합을 의미합니다. 이 변수들은 shell에서 설정, 수정 및 쿼리될 수 있습니다. 다음은 일반적인 환경변수들입니다.
    - PATH
        - Shell이 실행 파일을 찾을 때 검색하는 디렉터리 목록을 정의한다. 사용자가 명령을 입력하면 shell은 PATH 변수에 나열된 각 디렉터리에서 명령을 나타나는 순서대로 검색합니다.
    - HOME
        - 현재 사용자의 홈 디렉토리를 정의합니다. The tilde character(~, 물결표)는 사용자의 홈 디렉토리를 참조하는 간단한 방법입니다.
    - USER
        - 현재 사용자의 사용자 이름을 포함하고 있습니다.
    - SHELL
        - 사용자의 로그인 shell의 경로 이름을 포함하고 있습니다.
    - TERM
        - 사용자가 사용 중인 터미널의 유형을 정의합니다.
        - 프로그램에서 터미널의 출력을 포맷하는 방법을 결정하는데 사용됩니다.
    - PS1
        - Shell에 의해 표시되는 프롬프트 문자열을 정의합니다.
        - 프롬프트 문자열에는 일반적으로 현재 작업 디렉토리, 호스트 이름 및 사용자 이름이 포함됩니다.
    - ENV
        - Shell이 시작될 때 실행되는 파일의 경로 이름을 정의합니다. 이 파일은 환경 변수를 설정하거나 다른 초기화 작업을 수행하는 데 사용할 수 있습니다.
- 사용자는 “`export`” 명령을 사용하여 환경 변수를 설정하고 수정할 수 있습니다. 예를 들어, PATH 변수에 디렉터리를 추가하려면 다음과 같이 입력하면 됩니다.
    
    ```ruby
    export PATH=$PATH:/path/to/new/directory
    ```
    
    - 이렇게 하면 “/path/to/new/directory” 디렉토리가 기존 PATH 변수의 끝에 추가됩니다.
        - 사용자는 전체 경로 이름을 지정하지 않고 새 디렉토리에서 명령을 실행할 수 있게 됩니다.

### Built-in Commands

- Built-in commands는 shell에 의해 실행되는 별도의 프로그램이 아니라 shell 프로그램 자체에 직접 내장된 명령어이다. 내장 명령어는 shell의 일부이기 때문에 외부 명령어보다 빠르고 효율적으로 실행할 수 있습니다. 다음은 일반적인 내장 명령어입니다.
    - cd
        - shell의 현재 작업 디렉터리를 변경하는 데 사용됩니다.
    - pwd
        - 현재 작업 디렉터리를 나타내는 데 사용됩니다.
    - echo
        - 화면에 메시지를 표시하는 데 사용됩니다.
        - 변수 값을 표시하거나 문자열을 나타내는 데 사용될 수 있습니다.
    - export
        - 환경 변수를 설정하거나 수정하는 데 사용됩니다.
        - 변수를 다른 프로세스에 사용할 수 있도록 만드는 데 사용됩니다.
    - unset
        - 환경 변수를 제거하는 데 사용됩니다.
    - alias
        - 명령의 바로 가기 또는 별칭을 만드는 데 사용됩니다.
        - 예를 들어, 사용자는 “ls -al”의 별칭을 “ll”로 만들 수 있습니다.
    - history
        - Shell의 명령 기록을 표시하는 데 사용됩니다.
    - exit
        - Shell을 종료하는 데 사용됩니다.

### Shell subsystems

- cmd 인터페이스 또는 shell에서 subsystem(하위 시스템)은 특정 작업군을 수행하거나 특정 기능군을 제공하는 모듈 또는 구성 요소를 의미합니다. 하위 시스템은 shell에 통합된 별도의 프로그램으로 간주될 수 있으며 일반적으로 파일 관리, 프로세스 관리, 입출력 리디렉션과 같은 작업을 처리하도록 설계되었습니다.
- File subsystem
    - 시스템의 파일및 디렉터리를 관리하고 파일을 생성, 삭제, 이동, 및 복사하기 위한 도구를 제공합니다.
    - 명령어 예) ls, cp, mv, rm, mkdir 등
- Process subsystem
    - 시스템에서 실행 중인 프로세스를 관리하고 프로세스를 시작, 중지 및 모니터링하기 위한 도구를 제공합니다.
    - 명령어 예) ps, kill, top, job 등
- Input/Output subsystem
    - 입출력 스트림을 관리하고, 출력을 파일 또는 다른 프로세스로 리디렉션하며, 파일 또는 다른 프로세스에서 입력을 읽기 위한 도구를 제공합니다.
    - 명령 예) >, <, | 등
- Networking subsystem
    - 네트워크 연결을 관리하고 네트워크 설정을 구성하며 네트워크 작업을 수행하기 위한 도구를 제공합니다.
    - 명령어 예) ping, ifconfig, netstat 등
- Spripting subsystem
    - 루프, 조건부 및 변수를 포함하여 스크립팅 및 자동화를 위한 도구를 제공합니다.
    - 명령 예) if, while, for, export 등